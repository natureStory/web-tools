# 多工具平台架构可视化

## 📐 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                         Web Tools 首页                           │
│                    (HomeHeroSection.tsx)                        │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        工具选择器                                 │
│                      (ToolTabs.tsx)                             │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐      │
│  │ JSON │ │ URL  │ │Base64│ │ Hash │ │ 时间 │ │ 颜色 │      │
│  │  ✅  │ │  🚧  │ │  🚧  │ │  🚧  │ │  🚧  │ │  🚧  │      │
│  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘      │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
                    ┌───────────────────────┐
                    │   renderToolContent    │
                    │     (路由分发器)        │
                    └───────────────────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        ▼                       ▼                       ▼
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│  JSON 工具   │      │   URL 工具   │      │  其他工具...  │
│ JsonTool.tsx │      │ UrlTool.tsx  │      │  (未来扩展)   │
└──────────────┘      └──────────────┘      └──────────────┘
        │
        ├─────────────────────┐
        ▼                     ▼
┌──────────────┐      ┌──────────────┐
│  上传区域     │      │  文档列表     │
│ NewFile.tsx  │      │ SavedDocs... │
└──────────────┘      └──────────────┘
```

## 📂 文件组织结构

```
app/components/Home/
│
├── HomeHeroSection.tsx         # 🏠 主页面入口
│   ├── 页面标题 "Web Tools"
│   ├── 工具选择器 <ToolTabs>
│   └── 工具内容渲染
│
├── ToolTabs.tsx                # 📑 Tab 组件
│   ├── Tab 导航栏
│   ├── 状态管理 (useState)
│   └── 内容渲染 (Render Props)
│
├── SavedDocumentsList.tsx      # 📋 文档列表
│   ├── 文档卡片
│   ├── 搜索功能
│   ├── Hover 预览
│   └── 删除功能
│
└── tools/                      # 🔧 工具模块目录
    │
    ├── index.ts                # 统一导出
    │
    ├── toolsConfig.tsx         # ⚙️ 工具配置中心
    │   └── toolsConfig[]       # 所有工具的配置数组
    │
    ├── JsonTool.tsx            # ✅ JSON 工具 (已实现)
    │   ├── 上传区域
    │   └── 文档列表
    │
    └── UrlTool.tsx             # 🚧 URL 工具 (占位)
        └── 功能预览页面
```

## 🔄 数据流图

```
用户点击 Tab
      │
      ▼
┌─────────────────┐
│   ToolTabs      │  useState(activeTab)
│   状态更新       │
└─────────────────┘
      │
      ▼ toolId
┌─────────────────┐
│ Render Props    │  children(activeToolId)
│   回调函数       │
└─────────────────┘
      │
      ▼ activeToolId
┌─────────────────┐
│ renderContent   │  switch(toolId)
│   路由分发       │
└─────────────────┘
      │
      ▼ 对应组件
┌─────────────────┐
│   工具组件      │  <JsonTool /> 等
│     渲染        │
└─────────────────┘
```

## 🎯 工具配置流程

```
1. 创建工具组件
   tools/MyTool.tsx
   export function MyTool() { ... }
          │
          ▼
2. 添加配置
   toolsConfig.tsx
   { id: "mytool", name: "My Tool", ... }
          │
          ▼
3. 注册路由
   HomeHeroSection.tsx
   case "mytool": return <MyTool />
          │
          ▼
4. ✅ 完成！工具可用
```

## 🎨 样式继承关系

```
全局背景渐变
   │ bg-gradient-to-br from-purple-...
   │
   ├─► 工具选择卡片
   │     │ bg-white/5 → bg-white/15 (active)
   │     │ border-white/10 → border-lime-400 (active)
   │     │
   │     └─► 图标 & 文字
   │           │ text-slate-400 → text-lime-400 (hover/active)
   │           └─ text-slate-300 → text-white (active)
   │
   └─► 工具内容卡片
         │ bg-white/5 backdrop-blur-sm
         │ border border-white/10
         │
         ├─► 输入框
         │     │ bg-white/10
         │     └─ border-white/20
         │
         └─► 按钮
               │ bg-lime-400
               └─ text-slate-900
```

## 🔌 组件接口定义

### ToolConfig

```typescript
interface ToolConfig {
  id: string;           // "json" | "url" | "base64" | ...
  name: string;         // "JSON" | "URL" | "Base64" | ...
  icon: ReactNode;      // <svg>...</svg>
  description: string;  // "格式化和查看" | ...
  comingSoon?: boolean; // true = 禁用，显示"即将推出"
}
```

### ToolTabs Props

```typescript
interface ToolTabsProps {
  tools: ToolConfig[];              // 工具配置数组
  defaultTool?: string;             // 默认激活的工具 ID
  onTabChange?: (id: string) => void; // Tab 切换回调
  children: (id: string) => ReactNode; // Render Props
}
```

## 🎬 用户交互流程

```
┌─────────────────────────────────────────────────────────┐
│ 1. 用户访问首页                                           │
│    ↓                                                     │
│ 2. 显示所有工具 Tabs (JSON 默认选中)                      │
│    ↓                                                     │
│ 3. 渲染 JSON 工具内容                                     │
│    - 左侧：上传表单                                       │
│    - 右侧：已保存文档列表                                 │
│    ↓                                                     │
│ 4. 用户可以：                                            │
│    a) 切换到其他工具                                     │
│    b) 上传 JSON 文件                                     │
│    c) 输入 JSON URL                                      │
│    d) 查看/搜索已保存的文档                              │
│    e) Hover 预览文档内容                                 │
│    f) 点击打开文档                                       │
│    g) 删除文档                                           │
└─────────────────────────────────────────────────────────┘
```

## 🧩 工具模块化设计

```
每个工具都是独立的模块：

┌──────────────────────────────────┐
│        工具组件 (独立)             │
│  ┌────────────────────────────┐  │
│  │  • 独立的状态管理           │  │
│  │  • 独立的业务逻辑           │  │
│  │  • 独立的 UI 渲染           │  │
│  │  • 可选的数据持久化         │  │
│  └────────────────────────────┘  │
└──────────────────────────────────┘
           │
           ▼
    通过配置系统集成
           │
           ▼
┌──────────────────────────────────┐
│      工具配置 (统一管理)          │
│  ┌────────────────────────────┐  │
│  │  • id: 唯一标识             │  │
│  │  • name: 显示名称           │  │
│  │  • icon: SVG 图标           │  │
│  │  • description: 描述        │  │
│  │  • comingSoon: 状态         │  │
│  └────────────────────────────┘  │
└──────────────────────────────────┘
```

## 📊 状态管理架构

```
┌─────────────────────────────────────────┐
│            全局状态 (无)                  │
│     各工具管理自己的局部状态              │
└─────────────────────────────────────────┘
                  │
    ┌─────────────┼─────────────┐
    ▼             ▼             ▼
┌─────────┐ ┌─────────┐ ┌─────────┐
│ JSON    │ │  URL    │ │  其他   │
│ 工具    │ │  工具   │ │  工具   │
│ 状态    │ │  状态   │ │  状态   │
└─────────┘ └─────────┘ └─────────┘
    │
    ├─► useDocumentsList (文档列表)
    ├─► useState (表单输入)
    └─► IndexedDB (持久化)
```

## 🎭 Tab 状态变化

```
未激活状态
┌────────────────────────┐
│ [图标] 工具名           │  bg: white/5
│        描述文字         │  border: white/10
└────────────────────────┘  text: slate-300
         │
         │ hover
         ▼
Hover 状态
┌────────────────────────┐
│ [图标] 工具名           │  bg: white/10
│        描述文字         │  border: white/20
└────────────────────────┘  icon: lime-400
         │
         │ click
         ▼
激活状态
╔════════════════════════╗
║ [图标] 工具名           ║  bg: white/15
║        描述文字         ║  border: lime-400 (2px)
╚════════════════════════╝  text: white
                            icon: lime-400
```

## 🔮 扩展路径

```
当前状态 (v1.0)
  └─ JSON 工具 ✅

计划中 (v1.1)
  ├─ URL 工具
  ├─ Base64 工具
  └─ Hash 工具

未来 (v2.0)
  ├─ 工具搜索
  ├─ 工具收藏
  ├─ 使用历史
  └─ 批量处理

长期 (v3.0)
  ├─ 工具插件系统
  ├─ 自定义工具
  ├─ 工具市场
  └─ API 集成
```

## 💡 设计原则

```
1. 模块化
   每个工具独立开发、独立部署

2. 可扩展
   新增工具只需 4 步

3. 一致性
   统一的 UI 风格和交互模式

4. 渐进式
   从简单到复杂，逐步增强

5. 用户友好
   清晰的导航，直观的操作
```

---

通过这个架构，我们实现了一个灵活、可扩展、易维护的多工具平台！🚀

